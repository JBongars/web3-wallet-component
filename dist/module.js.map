{"mappings":"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","sources":["src/index.ts","src/WalletStore.ts","src/algorand/index.ts","src/algorand/myalgo/index.ts","src/types.ts","src/errors.ts","src/config/constants.ts","src/algorand/Algorand.ts","src/ethereum/index.ts","src/ethereum/metamask/index.ts","src/containers/index.ts","src/containers/window.ts","src/ethereum/Ethereum.ts","src/utils.ts"],"sourcesContent":["export * from \"./WalletStore\";\nexport * from \"./types\";\nexport * from \"./errors\";\nexport * from \"./ethereum\";\nexport * from \"./algorand\";\nexport * from \"./containers\";\n","import { MyAlgo } from \"./algorand\";\nimport { MyAlgoState } from \"./algorand/myalgo/types\";\nimport { NotImplementedError } from \"./errors\";\nimport { Metamask } from \"./ethereum\";\nimport { MetamaskState } from \"./ethereum/metamask/types\";\nimport { useWallets, WalletInterface, WALLETS } from \"./types\";\nimport { clone, iffyClone, useProxy } from \"./utils\";\n\ntype WalletID = keyof typeof WALLETS;\n\ntype WalletState = {\n  id: WalletID;\n  state: {\n    [key: string]: unknown;\n  };\n  previousStates: {\n    [key: string]: unknown;\n  }[];\n};\n\ntype WalletStoreConfig = {\n  previousWalletState?: WalletState[];\n};\n\nclass WalletStore implements useWallets {\n  private walletStates: WalletState[];\n\n  constructor(config: WalletStoreConfig) {\n    this.walletStates = config.previousWalletState || [];\n  }\n\n  private updateState(key: WalletID, newState: { [key: string]: unknown }) {\n    const wallet: WalletState | null | undefined = this.walletStates.find(\n      (elem) => elem.id === key\n    );\n\n    if (!wallet || wallet === null) {\n      const newWalletState = {\n        id: key,\n        state: newState,\n        previousStates: [],\n      };\n      this.walletStates.push(newWalletState);\n      return newWalletState;\n    }\n\n    wallet.previousStates.push(wallet.state);\n    wallet.state = newState;\n\n    return wallet;\n  }\n\n  public use(walletName: WalletID): any {\n    return useProxy((prop: string | Symbol) => {\n      if (prop === \"state\") {\n        return iffyClone(\n          this.walletStates.find((elem) => elem.id === walletName)?.state\n        );\n      }\n\n      // there may be an issue where if the client preserves multiple\n      // proxies, the wallet state could fall out of sync...\n      let target: WalletInterface<{ [key: string]: unknown }>;\n      const previousState: unknown = this.walletStates.find(\n        (elem) => elem.id === walletName\n      )?.state;\n\n      switch (walletName) {\n        case WALLETS.METAMASK:\n          target = new Metamask(previousState as MetamaskState);\n          break;\n        case WALLETS.MYALGO:\n          target = new MyAlgo(previousState as MyAlgoState);\n          break;\n        default:\n          throw new NotImplementedError();\n      }\n\n      if (\n        typeof target[\n          prop as keyof WalletInterface<{ [key: string]: unknown }>\n        ] !== \"function\"\n      ) {\n        return target[\n          prop as keyof WalletInterface<{ [key: string]: unknown }>\n        ];\n      }\n\n      return async (...args: any[]) => {\n        const result = await target[\n          prop as keyof WalletInterface<{ [key: string]: unknown }>\n        ](...(args as []));\n\n        this.updateState(walletName, target.toJSON());\n\n        return result;\n      };\n    });\n  }\n\n  public toJSON() {\n    return this.walletStates.map((elem) => clone(elem)) as WalletState[];\n  }\n}\n\nexport { WalletStore };\nexport type { WalletID, WalletState, WalletStoreConfig };\n","export * from \"./myalgo\";\nexport * from \"./Algorand\";\n","import {\n  SignedTx,\n  AlgorandTxn,\n  EncodedTransaction,\n} from \"@randlabs/myalgo-connect\";\nimport { Signer, WALLET_STATUS, WalletInterface } from \"./../../types\";\nimport { MyAlgoAsset, MyAlgoSigner, MyAlgoState } from \"./types\";\nimport MyAlgoConnect from \"@randlabs/myalgo-connect\";\nimport { NotImplementedError } from \"~/src/errors\";\nimport { CHAINS } from \"~/src/config/constants\";\n\nconst initialState: Readonly<MyAlgoState> = Object.freeze({\n  accounts: [],\n  isConnected: false,\n});\n\nclass MyAlgo implements WalletInterface<MyAlgoState> {\n  public state: MyAlgoState;\n  private provider: MyAlgoConnect | undefined;\n\n  constructor(state?: MyAlgoState) {\n    if (state) {\n      this.state = { ...state };\n    } else {\n      this.state = { ...initialState };\n    }\n  }\n\n  public async init(): Promise<WALLET_STATUS> {\n    return WALLET_STATUS.OK;\n  }\n\n  public async signIn(): Promise<WALLET_STATUS> {\n    const myAlgoConnect = this.getProvider();\n\n    this.state.accounts = await myAlgoConnect.connect();\n    this.state.isConnected = this.state.accounts.length > 0;\n\n    return WALLET_STATUS.OK;\n  }\n\n  public async signOut(): Promise<WALLET_STATUS> {\n    this.state.accounts = [];\n    this.state.isConnected = false;\n\n    return WALLET_STATUS.OK;\n  }\n\n  public async getSigner(): Promise<MyAlgoSigner> {\n    return async (transactions: AlgorandTxn[]): Promise<SignedTx[]> => {\n      const myAlgoConnect = this.getProvider();\n      const signedTx = await myAlgoConnect.signTransaction(\n        transactions as (AlgorandTxn | EncodedTransaction)[]\n      );\n\n      return signedTx;\n    };\n  }\n\n  public async getBalance(): Promise<string> {\n    throw new NotImplementedError();\n  }\n\n  public async getAssets(): Promise<MyAlgoAsset[]> {\n    throw new NotImplementedError();\n  }\n\n  public getIsConnected(): boolean {\n    return this.state.isConnected;\n  }\n\n  public getPrimaryAccount(): string {\n    throw new NotImplementedError();\n  }\n\n  public getAccounts(): unknown[] {\n    throw new NotImplementedError();\n  }\n\n  public async fetchCurrentChainID(): Promise<number> {\n    return CHAINS.CHAIN_ID_ALGORAND;\n  }\n\n  public toJSON(): MyAlgoState {\n    return this.state;\n  }\n\n  public getProvider(): MyAlgoConnect {\n    if (this.provider instanceof MyAlgoConnect) {\n      return this.provider;\n    }\n\n    this.provider = new MyAlgoConnect();\n    return this.provider;\n  }\n}\n\nexport { MyAlgo };\n","import { MyAlgo } from \"./algorand\";\nimport { Metamask } from \"./ethereum\";\n\ntype ChainID = 2 | 8;\n\nenum WALLET_STATUS {\n  OK,\n  LOGIN_ERROR,\n  WALLET_ERROR,\n  EXTENSION_NOT_FOUND,\n  ACCOUNT_NOT_FOUND,\n}\n\nconst WALLETS = {\n  MYALGO: \"MYALGO\",\n  METAMASK: \"METAMASK\",\n} as const;\n\ninterface useWallets {\n  use(walletName: \"MYALGO\"): MyAlgo;\n  use(walletName: \"METAMASK\"): Metamask;\n}\n\ntype Signer<T, S> = (transactions: T[]) => Promise<S[]>;\n\ninterface WalletInterface<T> {\n  init: () => Promise<WALLET_STATUS>;\n  signIn: () => Promise<WALLET_STATUS>;\n  signOut: () => Promise<WALLET_STATUS>;\n  getSigner: () => Promise<Signer<any, any>>;\n  getBalance: () => Promise<string>;\n  getAssets: () => Promise<unknown[]>;\n  getIsConnected: () => boolean;\n  getPrimaryAccount: () => unknown;\n  getAccounts: () => unknown[];\n  fetchCurrentChainID: () => Promise<number>;\n  toJSON: () => T;\n}\n\nexport { WALLETS, WalletInterface, WALLET_STATUS };\nexport type { ChainID, Signer, useWallets };\n","class NotImplementedError extends Error {\n  constructor(message: string = \"NotImplementedError\") {\n    super(message);\n    this.name = \"NotImplementedError\";\n  }\n}\n\nclass WalletNotInstalledError extends Error {\n  constructor(message: string = \"WalletNotInstalledError\") {\n    super(message);\n    this.name = \"WalletNotInstalledError\";\n  }\n}\n\nclass WalletNotConnectedError extends Error {\n  constructor(message: string = \"WalletNotConnectedError\") {\n    super(message);\n    this.name = \"WalletNotConnectedError\";\n  }\n}\n\nexport {\n  NotImplementedError,\n  WalletNotInstalledError,\n  WalletNotConnectedError,\n};\n","import { ChainID } from \"~/src/types\";\n\nconst CHAINS = {\n  CHAIN_ID_ALGORAND: 8 as ChainID,\n  CHAIN_ID_ETHEREUM: 2 as ChainID,\n};\n\nexport { CHAINS };\n","import { MyAlgo } from \"./myalgo\";\nimport { MyAlgoState } from \"./myalgo/types\";\n\ntype AlgorandState = {\n  myAlgo?: MyAlgoState;\n};\n\nclass Algorand {\n  public myAlgo: MyAlgo;\n\n  constructor(data?: AlgorandState) {\n    this.myAlgo = new MyAlgo(data?.myAlgo);\n  }\n}\n\nexport { Algorand, AlgorandState };\n","export * from \"./metamask\";\nexport * from \"./Ethereum\";\n","import { Signer, WALLET_STATUS, WalletInterface } from \"../../types\";\nimport { MetamaskAsset, MetamaskSigner, MetamaskState } from \"./types\";\nimport { ethers } from \"ethers\";\nimport {\n  TransactionRequest,\n  TransactionResponse,\n} from \"@ethersproject/abstract-provider\";\nimport { useWindow } from \"../../containers\";\nimport {\n  NotImplementedError,\n  WalletNotConnectedError,\n  WalletNotInstalledError,\n} from \"~/src/errors\";\n\nconst initialState: Readonly<MetamaskState> = Object.freeze({\n  accounts: [],\n  isConnected: false,\n});\n\nclass Metamask implements WalletInterface<MetamaskState> {\n  public state: MetamaskState;\n  public provider?: ethers.providers.Web3Provider;\n\n  constructor(state?: MetamaskState) {\n    if (state) {\n      this.state = { ...state };\n    } else {\n      this.state = { ...initialState };\n    }\n  }\n\n  private enforceIsConnected(): void {\n    if (!this.getIsConnected()) {\n      throw new WalletNotConnectedError();\n    }\n  }\n\n  public async init(): Promise<WALLET_STATUS> {\n    this.provider = await this.getProvider();\n\n    return WALLET_STATUS.OK;\n  }\n\n  public async signIn(): Promise<WALLET_STATUS> {\n    const provider = await this.getProvider();\n    this.state.accounts = await provider.send(\"eth_requestAccounts\", []);\n    this.state.isConnected = this.state.accounts.length > 0;\n\n    return WALLET_STATUS.OK;\n  }\n\n  public async signOut(): Promise<WALLET_STATUS> {\n    this.enforceIsConnected();\n    this.state.accounts = [];\n    this.state.isConnected = false;\n\n    return WALLET_STATUS.OK;\n  }\n\n  public async getSigner(): Promise<MetamaskSigner> {\n    return async (\n      transactions: TransactionRequest[]\n    ): Promise<TransactionResponse[]> => {\n      this.enforceIsConnected();\n\n      const provider = this.provider || (await this.getProvider());\n      const transactionResponse = await provider\n        .getSigner()\n        .sendTransaction(transactions[0]);\n\n      return [transactionResponse];\n    };\n  }\n\n  public async getBalance(): Promise<string> {\n    this.enforceIsConnected();\n\n    const provider = this.provider || (await this.getProvider());\n    const balance = await provider.getBalance(this.state.accounts[0]);\n    return balance.toString();\n  }\n\n  public async getAssets(): Promise<MetamaskAsset[]> {\n    throw new NotImplementedError();\n  }\n\n  public getIsConnected(): boolean {\n    return this.state.isConnected;\n  }\n\n  public getPrimaryAccount(): string {\n    this.enforceIsConnected();\n\n    return this.state.accounts[0];\n  }\n\n  public getAccounts(): string[] {\n    this.enforceIsConnected();\n\n    return this.state.accounts;\n  }\n\n  public async fetchCurrentChainID(): Promise<number> {\n    this.enforceIsConnected();\n\n    const provider: ethers.providers.Web3Provider = await this.getProvider();\n    const chainId: number = await provider.send(\"eth_chainId\", []);\n\n    return chainId;\n  }\n\n  public toJSON(): MetamaskState {\n    return this.state;\n  }\n\n  public async mountEventListeners(\n    callback?: (accounts: string[]) => Promise<unknown>\n  ) {\n    const provider = await this.getProvider();\n\n    provider.on(\"accountsChanged\", async (accounts: string[]) => {\n      this.state.accounts = accounts;\n\n      if (callback) {\n        return callback(accounts);\n      }\n    });\n  }\n\n  public async unmountEventListeners(callback?: () => Promise<unknown>) {\n    const provider = await this.getProvider();\n\n    provider.removeListener(\"accountsChanged\", async () => {\n      if (callback) {\n        return callback();\n      }\n    });\n  }\n\n  public async getProvider(): Promise<ethers.providers.Web3Provider> {\n    const ethereum = (await useWindow(\n      async (windowObject) => (windowObject as any).ethereum\n    )) as any;\n\n    if (!ethereum) {\n      throw new WalletNotInstalledError();\n    }\n\n    return new ethers.providers.Web3Provider(ethereum);\n  }\n}\n\nexport { Metamask };\n","export * from \"./window\";\n","const useWindow = async (\n  cb: (windows: unknown) => Promise<void>\n): Promise<void> => {\n  try {\n    await cb(window as unknown);\n  } catch (err) {\n    console.log(\"Error opening window...\");\n    console.log(err);\n  }\n};\n\nexport { useWindow };\n","import { Metamask } from \"./metamask\";\nimport { MetamaskState } from \"./metamask/types\";\n\ntype EthereumState = {\n  metaMask?: MetamaskState;\n};\n\nclass Ethereum {\n  public metaMask: Metamask;\n\n  constructor(data?: EthereumState) {\n    this.metaMask = new Metamask(data?.metaMask);\n  }\n}\n\nexport type { Ethereum, EthereumState };\n","const clone = (obj: { [key: string]: unknown }): { [key: string]: unknown } =>\n  JSON.parse(JSON.stringify(obj));\n\nconst iffyClone = (\n  obj: { [key: string]: unknown } | null | undefined\n): { [key: string]: unknown } | null | undefined =>\n  obj && obj !== null ? clone(obj) : null;\n\nconst useProxy = (\n  callback: (prop: string | Symbol) => Promise<unknown> | unknown\n): any =>\n  new Proxy(\n    {},\n    {\n      get(_target, prop, receiver) {\n        const result = callback(prop);\n        if (result === null) return receiver;\n        else return result;\n      },\n    }\n  );\n\nexport { clone, iffyClone, useProxy };\n"],"names":[],"version":3,"file":"module.js.map"}